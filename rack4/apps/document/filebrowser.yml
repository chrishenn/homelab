---
services:
  filebrowser:
    profiles: [files]
    image: gtstef/filebrowser
    container_name: filebrowser
    restart: unless-stopped
    environment:
      TZ: $TZ
      FILEBROWSER_CONFIG: 'data/config.yaml'
    volumes:
      - ./filebrowser/config.yaml:/home/filebrowser/data/config.yaml
      - /mnt/k:/mnt/k
      - /mnt/h:/mnt/h
      - /mnt/q:/mnt/q
      - /mnt/f:/mnt/f
    networks: [traefik]
    labels:
      homepage.instance.private.group: Infra
      homepage.instance.private.name: File Browser
      homepage.instance.private.icon: filebrowser-quantum.png
      homepage.instance.private.href: https://files.henn.dev
      homepage.instance.private.description: File Browser

      traefik.enable: true
      traefik.http.routers.files.rule: Host(`files.henn.dev`)
      traefik.http.routers.files.entrypoints: websecure
      traefik.http.routers.files.middlewares: hdrs@file
      traefik.http.routers.files.tls.certresolver: cf
      traefik.http.services.files.loadbalancer.server.port: 80
