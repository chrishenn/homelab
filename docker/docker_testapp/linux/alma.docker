FROM docker.io/almalinux/9-init:latest

RUN yum install man unzip passwd -y
RUN echo 'root' | passwd --stdin root

# install the app
ENV INSTALLER_SUFFIX=.rpm
ENV ARCH=x86_64
ENV INSTALLER_FILE=app*${ARCH}${INSTALLER_SUFFIX}
ENV SETTINGS_FILE=app.json

COPY ./$INSTALLER_FILE .
RUN yum install $INSTALLER_FILE -y

RUN mkdir -p /etc/app/
COPY ./$SETTINGS_FILE /etc/app/
RUN systemctl enable app
