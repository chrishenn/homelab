#################################
# Docker compose configuration  #
# Unified stack: docker-compose.yml + Traefik (traefik-net)
# No Caddy - external Traefik reverse proxy
#################################

APP_NAME=seafile

## Images
SEAFILE_IMAGE=seafileltd/seafile-pro-mc:13.0-latest
SEAFILE_DB_IMAGE=mariadb:10.11
SEAFILE_REDIS_IMAGE=redis
SEADOC_IMAGE=seafileltd/sdoc-server:2.0-latest
NOTIFICATION_SERVER_IMAGE=seafileltd/notification-server:13.0-latest
THUMBNAIL_SERVER_IMAGE=seafileltd/thumbnail-server:13.0-latest
SEASEARCH_IMAGE=seafileltd/seasearch:1.0-latest
MD_IMAGE=seafileltd/seafile-md-server:13.0-latest

COLLABORA_IMAGE=collabora/code:24.04.5.1.1
COLLABORA_USERNAME=$USER
COLLABORA_PASSWORD=$PASS
COLLABORA_ENABLE_ADMIN_CONSOLE=true
COLLABORA_REMOTE_FONT=
COLLABORA_ENABLE_FILE_LOGGING=false

## Storage

### Storage type
SEAF_SERVER_STORAGE_TYPE=disk
MD_STORAGE_TYPE=$SEAF_SERVER_STORAGE_TYPE
SS_STORAGE_TYPE=$SEAF_SERVER_STORAGE_TYPE

### Local storage path
BASIC_STORAGE_PATH=/mnt/k/docker/seafile
SEAFILE_VOLUME=$BASIC_STORAGE_PATH/$APP_NAME/data
SEAFILE_MYSQL_VOLUME=$BASIC_STORAGE_PATH/$APP_NAME/db
SS_DATA_PATH=$BASIC_STORAGE_PATH/$APP_NAME/seasearch
SEADOC_VOLUME=$BASIC_STORAGE_PATH/$APP_NAME/seadoc

### Storage configurations for S3 (only valid when XXX_STORAGE_TYPE=s3)
S3_COMMIT_BUCKET=
S3_FS_BUCKET=
S3_BLOCK_BUCKET=
S3_SS_BUCKET=
S3_MD_BUCKET=
S3_KEY_ID=
S3_SECRET_KEY=
S3_USE_V4_SIGNATURE=true
S3_PATH_STYLE_REQUEST=false
S3_AWS_REGION=us-east-1
S3_HOST=
S3_USE_HTTPS=true
S3_SSE_C_KEY=

#################################
#      Startup parameters       #
#################################
# Public domain (HTTPS via Traefik)
SEAFILE_SERVER_HOSTNAME=seafile.chenn.dev
SEAFILE_SERVER_PROTOCOL=https
TIME_ZONE=America/Chicago
JWT_PRIVATE_KEY="$SEAFILE_SECRET"

#####################################
# Third-party service configuration #
#####################################

## Database
SEAFILE_MYSQL_DB_HOST=db
SEAFILE_MYSQL_DB_USER=seafile
SEAFILE_MYSQL_DB_PASSWORD=1234
SEAFILE_MYSQL_DB_CCNET_DB_NAME=ccnet_db
SEAFILE_MYSQL_DB_SEAFILE_DB_NAME=seafile_db
SEAFILE_MYSQL_DB_SEAHUB_DB_NAME=seahub_db

## Cache
CACHE_PROVIDER=redis

### Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=1234

### Memcached
MEMCACHED_HOST=memcached
MEMCACHED_PORT=11211

######################################
#        Initial variables           #
# (Only valid on first-time startup) #
######################################

## Database root password (used to create Seafile users)
INIT_SEAFILE_MYSQL_ROOT_PASSWORD=1234

## Seafile admin user
INIT_SEAFILE_ADMIN_EMAIL="$EMAIL"
INIT_SEAFILE_ADMIN_PASSWORD="$PASS"

## SeaSearch admin user (when SeaSearch is enabled)
INIT_SS_ADMIN_USER=$INIT_SEAFILE_ADMIN_EMAIL
INIT_SS_ADMIN_PASSWORD=$INIT_SEAFILE_ADMIN_PASSWORD

############################################
# Additional configurations for extensions #
############################################

## SeaDoc service
ENABLE_SEADOC=true

## SeaSearch
SS_MAX_OBJ_CACHE_SIZE=10GB
SS_LOG_TO_STDOUT=false
SS_LOG_OUTPUT=true
SS_LOG_LEVEL=info

## Notification (real-time)
ENABLE_NOTIFICATION_SERVER=true
NOTIFICATION_SERVER_URL=https://$SEAFILE_SERVER_HOSTNAME/notification

## Email (for Seahub notifications)
EMAIL_HOST_PASSWORD=

## Seafile AI
ENABLE_SEAFILE_AI=false
SEAFILE_AI_LLM_TYPE=openai
SEAFILE_AI_LLM_URL=
SEAFILE_AI_LLM_KEY=
SEAFILE_AI_LLM_MODEL=gpt-4o-mini

## Metadata server
MD_FILE_COUNT_LIMIT=100000